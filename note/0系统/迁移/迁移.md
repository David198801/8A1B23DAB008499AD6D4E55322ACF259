入口，页面，按钮js，MigrationTaskCo

MigrationTaskSe..,执行方法

MigrationFactor





三个数据迁移

1.公共数据

2.产品数据

3.核算



数据迁移数据源处理



1.公共数据

公共数据一般可以不按时间迁移



url对应源码目录

list，查询

form，新增

对应jsp



迁移状态，带迁移可以迁移，可以修改状态重迁



公共迁移 getpublic，分版本







转换映射，如H转JYS01









2.产品数据

产品按指定时间迁移



基本信息，产品类型为空常见，



fcode，套账号



套账号迁移后变化，可以保持原来的，或自增







3.核算账务迁移（科目，凭证，估值表，余额表）

科目先迁移



通过科目性质_市场_投资标识匹配对应的多扩展科目



QD时间不能跨年



一般，多扩展通用科目方案，最多8级，一个产品建一条



进入临时表，审核进入正式表





校验是否签对：科目映射管理(查的临时表的内容，)，只显示有差异的记录（迁移后有问题的记录）

少的可以手工改



3.5科目维护：映射规则，缺少规则就用这个界面

3.5明细：3.5备份到5.0的信息，不规范就用这个界面



证券代码为空：批量截取



映射规则检查按钮：映射完成后可以检查



审核从临时表到正式表，状态变为迁移成功

如果已经进到正式表里了，还是显示失败，需要手动改为迁移成功



3-2

凭证，估值表，余额表

按时间段迁移

