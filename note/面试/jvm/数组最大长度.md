https://www.zhihu.com/question/31809233



byte[]为2^31-2



有两种限制。

一是规范隐含的限制。Java数组的length必须是非负的int，所以它的理论最大值就是java.lang.Integer.MAX_VALUE = 2^31-1 = 2147483647。

二是具体的实现带来的限制。这会使得实际的JVM不一定能支持上面说的理论上的最大length。

例如说如果有JVM使用uint32_t来记录对象大小的话，那可以允许的最大的数组长度（按元素的个数计算）就会是：

(uint32_t的最大值 - 数组对象的对象头大小) / 数组元素大小

于是对于元素类型不同的数组，实际能创建的数组的最大length也会不同。

JVM实现里可以有许多类似的例子会影响实际能创建的数组大小。