SID：标识服务器，和myid一致

ZXID：事务ID，标识服务器的状态变更

Epoch：每个Leader任期代号，没有Leader时每次投票这个数据就会增加





服务器在这两种情况会发起选举

1.第一次启动，初始化

2.运行期间无法和leader保持连接



1.第一次启动，投票过半时id较大的胜出

假设5个server

(1) 服务器1启动，发起选举，投自己一票，未过半，looking状态

(2) 服务器2启动，发起选举，投自己一票，服务器1根据id较大改投服务器2 一票，未过半，looking状态

(3) 服务器3启动，发起选举，投自己一票，服务器1、2根据id较大改投服务器3 一票，票数过半，服务器3为leader

(2) 服务器4启动，发起选举，服务器3仍为leader





2.非第一次启动

2.1当前存在leader，那就和leader建立连接

2.2不存在leader

假设集群有5台服务器，SID为1、2、3、4、5，3为leader，ZXID为8、8、8、7、7

3、5故障，剩下3台机器，超过半数可以正常工作，进行选举

根据(Epoch，ZXID，SID)进行选举

(1) Epoch最大的直接胜出

(2) Epoch相同，ZXID大的胜出

(3) Epoch、ZXID相同，SID大的胜出